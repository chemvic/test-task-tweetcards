{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import{fetchUsers,updateUser}from\"redux/users/operations\";var initialState={items:[],isFollowed:false,isLoading:false,error:null};var handlePending=function handlePending(state){state.isLoading=true;};var handleRejected=function handleRejected(state,action){state.isLoading=false;state.error=action.payload;};var usersSlice=createSlice({name:'users',initialState:initialState,reducers:{changeFollowers:function changeFollowers(state,action){var _action$payload=action.payload,id=_action$payload.id,followers=_action$payload.followers;var index=state.items.findIndex(function(user){return user.id===id;});if(index!==-1){state.items[index].followers=followers;}}},extraReducers:function extraReducers(builder){builder.addCase(fetchUsers.pending,handlePending).addCase(fetchUsers.fulfilled,function(state,action){state.isLoading=false;state.items=action.payload;state.error=null;}).addCase(updateUser.rejected,handleRejected).addCase(updateUser.pending,handlePending).addCase(updateUser.fulfilled,function(state,action){state.isLoading=false;var index=state.items.findIndex(function(user){return user.id===action.meta.arg;});if(index!==-1){state.items[index]=action.payload;}state.error=null;});}});var changeFollowers=usersSlice.actions.changeFollowers;export{changeFollowers};export var usersReducer=usersSlice.reducer;","map":{"version":3,"names":["createSlice","fetchUsers","updateUser","initialState","items","isFollowed","isLoading","error","handlePending","state","handleRejected","action","payload","usersSlice","name","reducers","changeFollowers","_action$payload","id","followers","index","findIndex","user","extraReducers","builder","addCase","pending","fulfilled","rejected","meta","arg","actions","usersReducer","reducer"],"sources":["C:/Users/chemv/OneDrive/Documents/GitHub/React/test-task-tweetcards/test-task-tweetcards/src/redux/users/usersSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport {fetchUsers, updateUser} from \"redux/users/operations\";\r\n\r\nconst initialState={     \r\n      items: [],\r\n      isFollowed:false,\r\n      isLoading: false,\r\n      error: null\r\n  };\r\n   const handlePending = state => {\r\n    state.isLoading = true;\r\n  };\r\n  \r\n  const handleRejected = (state, action) => {\r\n    state.isLoading = false;\r\n    state.error = action.payload;    \r\n  };\r\n\r\nconst usersSlice = createSlice({\r\n    name: 'users',\r\n    initialState,\r\n    reducers: {\r\n        changeFollowers(state, action) {\r\n          const { id, followers } = action.payload;\r\n          const index = state.items.findIndex((user) => user.id === id);\r\n          if (index !== -1) {\r\n            state.items[index].followers = followers;\r\n          }\r\n        },\r\n      }, \r\n    extraReducers: (builder) =>{\r\n      builder\r\n      .addCase(fetchUsers.pending, handlePending)\r\n      .addCase(fetchUsers.fulfilled, (state, action)=>{\r\n        state.isLoading=false;\r\n        state.items=action.payload;\r\n        state.error=null;\r\n      })\r\n      .addCase(updateUser.rejected, handleRejected)\r\n      .addCase(updateUser.pending, handlePending)\r\n      .addCase(updateUser.fulfilled, (state, action)=>{\r\n        state.isLoading=false;\r\n        const index = state.items.findIndex((user) => user.id === action.meta.arg);\r\n        if (index !== -1) {\r\n          state.items[index] = action.payload;\r\n        }\r\n        state.error=null;\r\n      })  \r\n    }\r\n  });\r\n  export const { changeFollowers } = usersSlice.actions;\r\nexport const usersReducer = usersSlice.reducer;\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,kBAAkB,CAC9C,OAAQC,UAAU,CAAEC,UAAU,KAAO,wBAAwB,CAE7D,GAAM,CAAAC,YAAY,CAAC,CACbC,KAAK,CAAE,EAAE,CACTC,UAAU,CAAC,KAAK,CAChBC,SAAS,CAAE,KAAK,CAChBC,KAAK,CAAE,IACX,CAAC,CACA,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAGC,KAAK,CAAI,CAC9BA,KAAK,CAACH,SAAS,CAAG,IAAI,CACxB,CAAC,CAED,GAAM,CAAAI,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAID,KAAK,CAAEE,MAAM,CAAK,CACxCF,KAAK,CAACH,SAAS,CAAG,KAAK,CACvBG,KAAK,CAACF,KAAK,CAAGI,MAAM,CAACC,OAAO,CAC9B,CAAC,CAEH,GAAM,CAAAC,UAAU,CAAGb,WAAW,CAAC,CAC3Bc,IAAI,CAAE,OAAO,CACbX,YAAY,CAAZA,YAAY,CACZY,QAAQ,CAAE,CACNC,eAAe,UAAAA,gBAACP,KAAK,CAAEE,MAAM,CAAE,CAC7B,IAAAM,eAAA,CAA0BN,MAAM,CAACC,OAAO,CAAhCM,EAAE,CAAAD,eAAA,CAAFC,EAAE,CAAEC,SAAS,CAAAF,eAAA,CAATE,SAAS,CACrB,GAAM,CAAAC,KAAK,CAAGX,KAAK,CAACL,KAAK,CAACiB,SAAS,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACJ,EAAE,GAAKA,EAAE,GAAC,CAC7D,GAAIE,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBX,KAAK,CAACL,KAAK,CAACgB,KAAK,CAAC,CAACD,SAAS,CAAGA,SAAS,CAC1C,CACF,CACF,CAAC,CACHI,aAAa,CAAE,SAAAA,cAACC,OAAO,CAAI,CACzBA,OAAO,CACNC,OAAO,CAACxB,UAAU,CAACyB,OAAO,CAAElB,aAAa,CAAC,CAC1CiB,OAAO,CAACxB,UAAU,CAAC0B,SAAS,CAAE,SAAClB,KAAK,CAAEE,MAAM,CAAG,CAC9CF,KAAK,CAACH,SAAS,CAAC,KAAK,CACrBG,KAAK,CAACL,KAAK,CAACO,MAAM,CAACC,OAAO,CAC1BH,KAAK,CAACF,KAAK,CAAC,IAAI,CAClB,CAAC,CAAC,CACDkB,OAAO,CAACvB,UAAU,CAAC0B,QAAQ,CAAElB,cAAc,CAAC,CAC5Ce,OAAO,CAACvB,UAAU,CAACwB,OAAO,CAAElB,aAAa,CAAC,CAC1CiB,OAAO,CAACvB,UAAU,CAACyB,SAAS,CAAE,SAAClB,KAAK,CAAEE,MAAM,CAAG,CAC9CF,KAAK,CAACH,SAAS,CAAC,KAAK,CACrB,GAAM,CAAAc,KAAK,CAAGX,KAAK,CAACL,KAAK,CAACiB,SAAS,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACJ,EAAE,GAAKP,MAAM,CAACkB,IAAI,CAACC,GAAG,GAAC,CAC1E,GAAIV,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBX,KAAK,CAACL,KAAK,CAACgB,KAAK,CAAC,CAAGT,MAAM,CAACC,OAAO,CACrC,CACAH,KAAK,CAACF,KAAK,CAAC,IAAI,CAClB,CAAC,CAAC,CACJ,CACF,CAAC,CAAC,CACK,GAAQ,CAAAS,eAAe,CAAKH,UAAU,CAACkB,OAAO,CAAtCf,eAAe,CAAwB,OAAAA,eAAA,EACxD,MAAO,IAAM,CAAAgB,YAAY,CAAGnB,UAAU,CAACoB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}