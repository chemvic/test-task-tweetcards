{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport { fetchUsers, updateUser } from \"redux/users/operations\";\nconst initialState = {\n  items: [],\n  isFollowed: false,\n  isLoading: false,\n  error: null\n};\nconst handlePending = state => {\n  state.isLoading = true;\n};\nconst handleRejected = (state, action) => {\n  state.isLoading = false;\n  state.error = action.payload;\n};\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState,\n  reducers: {\n    changeFollowers(state, action) {\n      const {\n        id,\n        followers\n      } = action.payload;\n      const index = state.items.findIndex(user => user.id === id);\n      if (index !== -1) {\n        state.items[index].followers = followers;\n      }\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchUsers.pending, handlePending).addCase(fetchUsers.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.items = action.payload;\n      state.error = null;\n    }).addCase(updateUser.rejected, handleRejected).addCase(updateUser.pending, handlePending).addCase(updateUser.fulfilled, (state, action) => {\n      state.isLoading = false;\n      const index = state.items.findIndex(user => user.id === action.meta.arg);\n      if (index !== -1) {\n        state.items[index] = action.payload;\n      }\n      state.error = null;\n    });\n  }\n});\nexport const {\n  changeFollowers\n} = usersSlice.actions;\nexport const usersReducer = usersSlice.reducer;","map":{"version":3,"names":["createSlice","fetchUsers","updateUser","initialState","items","isFollowed","isLoading","error","handlePending","state","handleRejected","action","payload","usersSlice","name","reducers","changeFollowers","id","followers","index","findIndex","user","extraReducers","builder","addCase","pending","fulfilled","rejected","meta","arg","actions","usersReducer","reducer"],"sources":["C:/Users/chemv/OneDrive/Documents/GitHub/React/test-task-tweetcards/test-task-tweetcards/src/redux/users/usersSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport {fetchUsers, updateUser} from \"redux/users/operations\";\r\n\r\nconst initialState={     \r\n      items: [],\r\n      isFollowed:false,\r\n      isLoading: false,\r\n      error: null\r\n  };\r\n   const handlePending = state => {\r\n    state.isLoading = true;\r\n  };\r\n  \r\n  const handleRejected = (state, action) => {\r\n    state.isLoading = false;\r\n    state.error = action.payload;    \r\n  };\r\n\r\nconst usersSlice = createSlice({\r\n    name: 'users',\r\n    initialState,\r\n    reducers: {\r\n        changeFollowers(state, action) {\r\n          const { id, followers } = action.payload;\r\n          const index = state.items.findIndex((user) => user.id === id);\r\n          if (index !== -1) {\r\n            state.items[index].followers = followers;\r\n          }\r\n        },\r\n      }, \r\n    extraReducers: (builder) =>{\r\n      builder\r\n      .addCase(fetchUsers.pending, handlePending)\r\n      .addCase(fetchUsers.fulfilled, (state, action)=>{\r\n        state.isLoading=false;\r\n        state.items=action.payload;\r\n        state.error=null;\r\n      })\r\n      .addCase(updateUser.rejected, handleRejected)\r\n      .addCase(updateUser.pending, handlePending)\r\n      .addCase(updateUser.fulfilled, (state, action)=>{\r\n        state.isLoading=false;\r\n        const index = state.items.findIndex((user) => user.id === action.meta.arg);\r\n        if (index !== -1) {\r\n          state.items[index] = action.payload;\r\n        }\r\n        state.error=null;\r\n      })  \r\n    }\r\n  });\r\n  export const { changeFollowers } = usersSlice.actions;\r\nexport const usersReducer = usersSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAAQC,UAAU,EAAEC,UAAU,QAAO,wBAAwB;AAE7D,MAAMC,YAAY,GAAC;EACbC,KAAK,EAAE,EAAE;EACTC,UAAU,EAAC,KAAK;EAChBC,SAAS,EAAE,KAAK;EAChBC,KAAK,EAAE;AACX,CAAC;AACA,MAAMC,aAAa,GAAGC,KAAK,IAAI;EAC9BA,KAAK,CAACH,SAAS,GAAG,IAAI;AACxB,CAAC;AAED,MAAMI,cAAc,GAAGA,CAACD,KAAK,EAAEE,MAAM,KAAK;EACxCF,KAAK,CAACH,SAAS,GAAG,KAAK;EACvBG,KAAK,CAACF,KAAK,GAAGI,MAAM,CAACC,OAAO;AAC9B,CAAC;AAEH,MAAMC,UAAU,GAAGb,WAAW,CAAC;EAC3Bc,IAAI,EAAE,OAAO;EACbX,YAAY;EACZY,QAAQ,EAAE;IACNC,eAAeA,CAACP,KAAK,EAAEE,MAAM,EAAE;MAC7B,MAAM;QAAEM,EAAE;QAAEC;MAAU,CAAC,GAAGP,MAAM,CAACC,OAAO;MACxC,MAAMO,KAAK,GAAGV,KAAK,CAACL,KAAK,CAACgB,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACJ,EAAE,KAAKA,EAAE,CAAC;MAC7D,IAAIE,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBV,KAAK,CAACL,KAAK,CAACe,KAAK,CAAC,CAACD,SAAS,GAAGA,SAAS;MAC1C;IACF;EACF,CAAC;EACHI,aAAa,EAAGC,OAAO,IAAI;IACzBA,OAAO,CACNC,OAAO,CAACvB,UAAU,CAACwB,OAAO,EAAEjB,aAAa,CAAC,CAC1CgB,OAAO,CAACvB,UAAU,CAACyB,SAAS,EAAE,CAACjB,KAAK,EAAEE,MAAM,KAAG;MAC9CF,KAAK,CAACH,SAAS,GAAC,KAAK;MACrBG,KAAK,CAACL,KAAK,GAACO,MAAM,CAACC,OAAO;MAC1BH,KAAK,CAACF,KAAK,GAAC,IAAI;IAClB,CAAC,CAAC,CACDiB,OAAO,CAACtB,UAAU,CAACyB,QAAQ,EAAEjB,cAAc,CAAC,CAC5Cc,OAAO,CAACtB,UAAU,CAACuB,OAAO,EAAEjB,aAAa,CAAC,CAC1CgB,OAAO,CAACtB,UAAU,CAACwB,SAAS,EAAE,CAACjB,KAAK,EAAEE,MAAM,KAAG;MAC9CF,KAAK,CAACH,SAAS,GAAC,KAAK;MACrB,MAAMa,KAAK,GAAGV,KAAK,CAACL,KAAK,CAACgB,SAAS,CAAEC,IAAI,IAAKA,IAAI,CAACJ,EAAE,KAAKN,MAAM,CAACiB,IAAI,CAACC,GAAG,CAAC;MAC1E,IAAIV,KAAK,KAAK,CAAC,CAAC,EAAE;QAChBV,KAAK,CAACL,KAAK,CAACe,KAAK,CAAC,GAAGR,MAAM,CAACC,OAAO;MACrC;MACAH,KAAK,CAACF,KAAK,GAAC,IAAI;IAClB,CAAC,CAAC;EACJ;AACF,CAAC,CAAC;AACF,OAAO,MAAM;EAAES;AAAgB,CAAC,GAAGH,UAAU,CAACiB,OAAO;AACvD,OAAO,MAAMC,YAAY,GAAGlB,UAAU,CAACmB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}